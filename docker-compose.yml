version: '3'

services: 
# mongo service
    mongo_db:
        container_name: citybikes
        image: mongo:latest
        restart: always
        volumes:
         - mongo_db:/data/db  
# node api service
    api: 
        build: . 
        ports: 
         - "5000:5000"
        volumes:
         - .:/usr/src/app
        environment: 
          PORT: 5000
          MONGO_URI: mongodb://mongodb:27017
          DB_NAME: citybikes
          NAME: LinhNguyen
        depends_on:
          - mongo_db 
    
volumes: 
    mongo_db: {}